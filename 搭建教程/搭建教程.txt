发卡网搭建教程

宝塔>>>安装环境  服务器系统Ubuntu 22
Nginx 1.2x
PHP 7.4
MySQL 5.7
phpMyAdmin 5.0
 
添加新的站点，添加了一个
 
进入网站目录，上传源码（上传好了之后，解压）

解压好了之后进入/application/database.php文件 修改数据库账号和密码
修改第8行、第9行、第10行为你的数据库账号密码

上传我们的数据库文件，并且导入（记得导入！！！）上传好了之后点击导入
 
返回网站设置（点击设置按钮）
 
修改运行目录为/public
 
设置伪静态为：thinkphp

申请SSL证书（需要进行泛解析 如果不会泛解析请让域名的卖家教你）
 
申请成功后打开强制HTTPS按钮
 
进入后台 域名+/admin  比如 www.baidu.com/admin  （配置好你的所有盗U设置内容，否则不要执行下面的步骤了）
初始账号admin  初始密码admin123456

打开终端面板（安装nodejs环境 启动机器人需要）
 
以下命令为Ubuntu命令，可能在Linux系统中有些区别

第一步：更新依赖 （时间比较久）
命令：
sudo apt update
sudo apt upgrade

更新过程中出现Y/n或者其他你看不懂的 >>>> 请直接输入Y 后按下回车

第二步：
安装node环境
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

安装pm2启动环境
sudo npm install -g pm2

第三步：可验证环境是否安装成功
node -v
pm2 -v

出现版本号说明安装成功 ，没出现就多安装几次吧
  
进入网站根目录下 faka.js 文件的目录 （打开终端）
 
在终端中可输入命令：
（请先在后台配置好所有信息再开始启动机器人）

启动机器人命令：pm2 start faka.js --log "./faka-out.log" --error "./faka-error.log"

关闭程序命令：pm2 stop faka.js

重启程序命令：pm2 restart faka.js

首页公告在右侧菜单栏 【插件管理】>【点我进行配置】>【水瓶座模板配置】处修改

{TG} 是变量（为代理的用户名），如果不需要可以改为固定的。

注：
假设11月更新无提示授权已失效可在后台切换为正常授权模式
鱼苗首次授权阈值在 faka.js 文件中修改，key也要多申请一些自己的，避免请求失败。
使用命令 “修改阈值 TRxxxxx 1000”可修改鱼苗地址
使用命令 “杀鱼 Trxxxxx”将鱼苗的阈值调整至0.000001
在后台配置所有选项之后再启动机器人，否则会报错
支持发展代理使用，也可以个人使用

本程序基于红盟发卡二开Github：https://github.com/w-hehe/hmyk

泛解析域名说明： ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓

解析方法： 
